/*
Ä?á»’ Ã?N MÃ”N Há»ŒC AN TOÃ€N Báº¢O Máº¬T Dá»® LIá»†U TRONG Há»† THá»?NG THÃ”NG TIN
FILE Táº O DATABASE 
NHÃ“M 9

MSSV        Há»Œ TÃŠN          
19127366    Long Má»¹ Du
19127377    Nguyá»…n Huá»³nh KhÃ¡nh Duy
19127476    Tráº§n Thá»‹ Huáº¿ Minh
*/

-- XÃ³a táº¥t cáº£ báº£ng
--DROP TABLE HSBA CASCADE CONSTRAINTS;
--DROP TABLE HSBA_DV CASCADE CONSTRAINTS;
--DROP TABLE BENHNHAN CASCADE CONSTRAINTS;
--DROP TABLE CSYT CASCADE CONSTRAINTS;
--DROP TABLE NHANVIEN CASCADE CONSTRAINTS;

/
-- Táº¡o báº£ng
CREATE TABLE HSBA (
    MAHSBA CHAR(8),
    MABN CHAR(8),
    NGAY DATE,
    CHANDOAN NVARCHAR2(100),
    MABS CHAR(6),
    MAKHOA CHAR(6),
    MACSYT CHAR(6),
    KETLUAN NVARCHAR2(200),
	CONSTRAINT HSBA_PK PRIMARY KEY ( MAHSBA )
);

CREATE TABLE HSBA_DV (
    MAHSBA CHAR(8),
    MADV CHAR(6),
    NGAY DATE,
    MAKTV CHAR(6),
    KETQUA NVARCHAR2(200),
	CONSTRAINT HSBA_DV_PK PRIMARY KEY ( MAHSBA, MADV, NGAY )
);


CREATE TABLE BENHNHAN (
	MABN CHAR(8),
	MACSYT CHAR(6),
	TENBN NVARCHAR2(50),
	CMND CHAR(12),
	NGAYSINH DATE,
	SONHA VARCHAR2(20),
	TENDUONG NVARCHAR2(100),
	QUANHUYEN NVARCHAR2(50),
	TINHTP NVARCHAR2(50),
	TIENSUBENH NVARCHAR2(200),
	TIENSUBENHGD NVARCHAR2(200),
	DIUNGTHUOC NVARCHAR2(200),
	CONSTRAINT BENHNHAN_PK PRIMARY KEY ( MABN )

);

CREATE TABLE CSYT(
	MACSYT CHAR(6),
	TENCSYT NVARCHAR2(200),
	DCCSYT NVARCHAR2(200),
	SDTCSYT CHAR(10),
	CONSTRAINT CSYT_PK PRIMARY KEY ( MACSYT )
);

CREATE TABLE NHANVIEN(
	MANV CHAR(6),
	HOTEN NVARCHAR2(50),
	PHAI NVARCHAR2(5),
	NGAYSINH DATE,
	CMND CHAR(12),
	QUEQUAN NVARCHAR2(50),
	SODT CHAR(10),
	CSYT CHAR(6),
	VAITRO NVARCHAR2(20),
	CHUYENKHOA CHAR(6),
	CONSTRAINT NHANVIEN_PK PRIMARY KEY ( MANV )
);
/

-- Táº¡o cÃ¡c Foreign key constraints vÃ  check constraints
ALTER TABLE HSBA
ADD CONSTRAINT HSBA_BENHNHAN_FK FOREIGN KEY ( MABN )
        REFERENCES BENHNHAN ( MABN );
ALTER TABLE HSBA
ADD CONSTRAINT HSBA_NHANVIEN_FK FOREIGN KEY ( MABS )
        REFERENCES NHANVIEN ( MANV );
ALTER TABLE HSBA
ADD CONSTRAINT HSBA_CSYT_FK FOREIGN KEY ( MACSYT )
        REFERENCES CSYT ( MACSYT);

ALTER TABLE HSBA_DV
ADD CONSTRAINT HSBA_DV_HSBA_FK FOREIGN KEY ( MAHSBA )
        REFERENCES HSBA ( MAHSBA );

ALTER TABLE BENHNHAN
ADD CONSTRAINT BENHNHAN_CSYT_FK FOREIGN KEY ( MACSYT )
        REFERENCES CSYT ( MACSYT);

ALTER TABLE NHANVIEN
ADD CONSTRAINT NHANVIEN_CSYT_FK FOREIGN KEY ( CSYT )
        REFERENCES CSYT ( MACSYT);
ALTER TABLE NHANVIEN
ADD CONSTRAINT NHANVIEN_VAITRO_FK 
	CHECK (VAITRO IN (N'Thanh tra', N'CÆ¡ sá»Ÿ y táº¿', N'Y sÄ©/bÃ¡c sÄ©', N'NghiÃªn cá»©u'));



-- INSERT DATA TO NHANVIEN
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0001',N'B?nh vi?n ?a khoa V?n H?nh',N'700 S? V?n H?nh (n?i dài) - P 12 – Qu?n 10 - TP.HCM', '0986875637');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0002',N'B?nh vi?n Tân S?n Nh?t',N'2B Ph? Quang - P2 - Qu?n Tân Bình - TP.HCM', '0902318877');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0003',N'B?nh vi?n ?a khoa Tân H?ng ',N'871 Tr?n Xuân So?n - P. Tân H?ng - Qu?n 7 - TP.HCM', '0913777399');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0004',N'B?nh vi?n Th?ng Nh?t',N'01 Lý Th??ng Ki?t – Ph??ng 7 - Qu?n Tân Bình - TP.HCM', '0966821010');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0005',N'B?nh vi?n 175',N'786 Nguy?n Ki?m- P. 3- Qu?n Gò v?p - TP.HCM', '0984795351');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0006',N'B?nh vi?n Nguy?n Tri Ph??ng',N'468 Nguy?n Trãi – Ph??ng 8 – Qu?n 5 - TP.HCM', '0931427504');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0007',N'B?nh vi?n Nhân dân Gia ??nh',N'01 N? Trang Long – Ph??ng 7 – Qu?n Bình Th?nh - TP.HCM', '0902418869');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0008',N'B?nh vi?n nhân dân 115',N'527 S? V?n H?nh – Ph??ng 12 – Qu?n 10 - TP.HCM', '0907527643');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0009',N'B?nh vi?n ?a khoa Sài Gòn',N'125 Lê L?i – Ph??ng B?n Thành – Qu?n 1 - TP.HCM', '0902963115');
INSERT INTO CSYT(MACSYT, TENCSYT, DCCSYT, SDTCSYT) VALUES ('CS0010',N'B?nh vi?n Quân Dân Mi?n ?ông ',N'50 Lê V?n Vi?t – Ph??ng Hi?p Phú - Qu?n 9 - TP.HCM', '0908376664');

SELECT * FROM CSYT




